(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{470:function(t,s,a){t.exports=a.p+"assets/img/image-20210223110846794.14edb681.png"},471:function(t,s,a){t.exports=a.p+"assets/img/r-cnn.3213f72c.svg"},472:function(t,s,a){t.exports=a.p+"assets/img/fast-rcnn.8e472d35.svg"},473:function(t,s,a){t.exports=a.p+"assets/img/faster-rcnn.29666caa.svg"},474:function(t,s,a){t.exports=a.p+"assets/img/image-20210223172630635.fe43d977.png"},519:function(t,s,a){"use strict";a.r(s);var i=a(1),n=Object(i.a)({},(function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[i("h1",{attrs:{id:"目标检测常用网络笔记"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#目标检测常用网络笔记"}},[t._v("#")]),t._v(" 目标检测常用网络笔记")]),t._v(" "),i("p",[t._v("下面根据d2l一书中的介绍简单记录一下各个网络模型的特点，由于书中详细介绍了一个简易的SSD，因此这篇笔记主要以SSD为主，R-CNN系列概括其思想，YOLO系列书中未提及，内容主要源于网上的分享。\n")]),t._v(" "),i("h2",{attrs:{id:"ssd"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#ssd"}},[t._v("#")]),t._v(" SSD")]),t._v(" "),i("p",[t._v("单发多框检测（single shot multibox detection，SSD）简单、快速，并得到了广泛应用。该模型的一些设计思想和实现细节常适用于其他目标检测模型。")]),t._v(" "),i("h3",{attrs:{id:"网络结构"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#网络结构"}},[t._v("#")]),t._v(" 网络结构")]),t._v(" "),i("p",[i("img",{attrs:{src:a(470),alt:"image-20210223110846794"}})]),t._v(" "),i("p",[t._v("首先特征提取网络选用了VGG-16，后面继续使用卷积来缩小特征图以获得多尺度，此外还设计了6个多尺度检测模块来生成锚框。Conv:3x3x(4x(Classes+4))中，3x3是卷积核大小(d2l中padding为1)，4为锚框数量，Classes+4中的4为offsets。由此可以看出，SSD在每个类别的探测锚框数为:")]),t._v(" "),i("p",{staticClass:"katex-block"},[i("span",{staticClass:"katex-display"},[i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[i("semantics",[i("mrow",[i("mn",[t._v("38")]),i("mo",[t._v("×")]),i("mn",[t._v("38")]),i("mo",[t._v("×")]),i("mn",[t._v("4")]),i("mo",[t._v("+")]),i("mn",[t._v("19")]),i("mo",[t._v("×")]),i("mn",[t._v("19")]),i("mo",[t._v("×")]),i("mn",[t._v("6")]),i("mo",[t._v("+")]),i("mn",[t._v("10")]),i("mo",[t._v("×")]),i("mn",[t._v("10")]),i("mo",[t._v("×")]),i("mn",[t._v("6")]),i("mo",[t._v("+")]),i("mn",[t._v("5")]),i("mo",[t._v("×")]),i("mn",[t._v("5")]),i("mo",[t._v("×")]),i("mn",[t._v("6")]),i("mo",[t._v("+")]),i("mn",[t._v("3")]),i("mo",[t._v("×")]),i("mn",[t._v("3")]),i("mo",[t._v("×")]),i("mn",[t._v("4")]),i("mo",[t._v("+")]),i("mn",[t._v("1")]),i("mo",[t._v("×")]),i("mn",[t._v("1")]),i("mo",[t._v("×")]),i("mn",[t._v("4")]),i("mo",[t._v("=")]),i("mn",[t._v("8732")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("38\\times 38\\times 4 + 19\\times 19 \\times 6 + 10\\times 10\\times 6+ 5\\times 5\\times 6 + 3\\times 3 \\times4 + 1\\times 1\\times 4 = 8732\n")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.72777em","vertical-align":"-0.08333em"}}),i("span",{staticClass:"mord"},[t._v("3")]),i("span",{staticClass:"mord"},[t._v("8")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("×")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.72777em","vertical-align":"-0.08333em"}}),i("span",{staticClass:"mord"},[t._v("3")]),i("span",{staticClass:"mord"},[t._v("8")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("×")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.72777em","vertical-align":"-0.08333em"}}),i("span",{staticClass:"mord"},[t._v("4")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("+")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.72777em","vertical-align":"-0.08333em"}}),i("span",{staticClass:"mord"},[t._v("1")]),i("span",{staticClass:"mord"},[t._v("9")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("×")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.72777em","vertical-align":"-0.08333em"}}),i("span",{staticClass:"mord"},[t._v("1")]),i("span",{staticClass:"mord"},[t._v("9")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("×")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.72777em","vertical-align":"-0.08333em"}}),i("span",{staticClass:"mord"},[t._v("6")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("+")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.72777em","vertical-align":"-0.08333em"}}),i("span",{staticClass:"mord"},[t._v("1")]),i("span",{staticClass:"mord"},[t._v("0")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("×")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.72777em","vertical-align":"-0.08333em"}}),i("span",{staticClass:"mord"},[t._v("1")]),i("span",{staticClass:"mord"},[t._v("0")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("×")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.72777em","vertical-align":"-0.08333em"}}),i("span",{staticClass:"mord"},[t._v("6")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("+")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.72777em","vertical-align":"-0.08333em"}}),i("span",{staticClass:"mord"},[t._v("5")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("×")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.72777em","vertical-align":"-0.08333em"}}),i("span",{staticClass:"mord"},[t._v("5")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("×")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.72777em","vertical-align":"-0.08333em"}}),i("span",{staticClass:"mord"},[t._v("6")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("+")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.72777em","vertical-align":"-0.08333em"}}),i("span",{staticClass:"mord"},[t._v("3")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("×")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.72777em","vertical-align":"-0.08333em"}}),i("span",{staticClass:"mord"},[t._v("3")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("×")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.72777em","vertical-align":"-0.08333em"}}),i("span",{staticClass:"mord"},[t._v("4")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("+")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.72777em","vertical-align":"-0.08333em"}}),i("span",{staticClass:"mord"},[t._v("1")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("×")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.72777em","vertical-align":"-0.08333em"}}),i("span",{staticClass:"mord"},[t._v("1")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("×")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.64444em","vertical-align":"0em"}}),i("span",{staticClass:"mord"},[t._v("4")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"mrel"},[t._v("=")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.64444em","vertical-align":"0em"}}),i("span",{staticClass:"mord"},[t._v("8")]),i("span",{staticClass:"mord"},[t._v("7")]),i("span",{staticClass:"mord"},[t._v("3")]),i("span",{staticClass:"mord"},[t._v("2")])])])])])]),t._v(" "),i("h3",{attrs:{id:"锚框的参数"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#锚框的参数"}},[t._v("#")]),t._v(" 锚框的参数")]),t._v(" "),i("p",[t._v("锚框主要有两个参数——scale与ratio。在论文中，作者提到，scale由以下公式计算：")]),t._v(" "),i("p",{staticClass:"katex-block"},[i("span",{staticClass:"katex-display"},[i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[i("semantics",[i("mrow",[i("msub",[i("mi",[t._v("s")]),i("mi",[t._v("k")])],1),i("mo",[t._v("=")]),i("msub",[i("mi",[t._v("s")]),i("mi",[t._v("min")]),i("mo",[t._v("⁡")])],1),i("mo",[t._v("+")]),i("mfrac",[i("mrow",[i("msub",[i("mi",[t._v("s")]),i("mi",[t._v("max")]),i("mo",[t._v("⁡")])],1),i("mo",[t._v("−")]),i("msub",[i("mi",[t._v("s")]),i("mi",[t._v("min")]),i("mo",[t._v("⁡")])],1)],1),i("mrow",[i("mi",[t._v("m")]),i("mo",[t._v("−")]),i("mn",[t._v("1")])],1)],1),i("mo",{attrs:{stretchy:"false"}},[t._v("(")]),i("mi",[t._v("k")]),i("mo",[t._v("−")]),i("mn",[t._v("1")]),i("mo",{attrs:{stretchy:"false"}},[t._v(")")]),i("mo",{attrs:{separator:"true"}},[t._v(",")]),i("mspace",{attrs:{width:"1em"}}),i("mi",[t._v("k")]),i("mo",[t._v("∈")]),i("mo",{attrs:{stretchy:"false"}},[t._v("[")]),i("mn",[t._v("1")]),i("mo",{attrs:{separator:"true"}},[t._v(",")]),i("mi",[t._v("m")]),i("mo",{attrs:{stretchy:"false"}},[t._v("]")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("s_{k}=s_{\\min }+\\frac{s_{\\max }-s_{\\min }}{m-1}(k-1), \\quad k \\in[1, m]\n")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.58056em","vertical-align":"-0.15em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[t._v("s")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[t._v("k")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"mrel"},[t._v("=")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.73333em","vertical-align":"-0.15em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[t._v("s")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.31750199999999995em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mop mtight"},[i("span",{staticClass:"mtight"},[t._v("m")]),i("span",{staticClass:"mtight"},[t._v("i")]),i("span",{staticClass:"mtight"},[t._v("n")])])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("+")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"2.0296600000000002em","vertical-align":"-0.7693300000000001em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mopen nulldelimiter"}),i("span",{staticClass:"mfrac"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.2603300000000002em"}},[i("span",{staticStyle:{top:"-2.314em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[t._v("m")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("−")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mord"},[t._v("1")])])]),i("span",{staticStyle:{top:"-3.23em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),i("span",{staticStyle:{top:"-3.677em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[t._v("s")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.151392em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mop mtight"},[i("span",{staticClass:"mtight"},[t._v("m")]),i("span",{staticClass:"mtight"},[t._v("a")]),i("span",{staticClass:"mtight"},[t._v("x")])])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("−")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[t._v("s")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.31750199999999995em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mop mtight"},[i("span",{staticClass:"mtight"},[t._v("m")]),i("span",{staticClass:"mtight"},[t._v("i")]),i("span",{staticClass:"mtight"},[t._v("n")])])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.7693300000000001em"}},[i("span")])])])]),i("span",{staticClass:"mclose nulldelimiter"})]),i("span",{staticClass:"mopen"},[t._v("(")]),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03148em"}},[t._v("k")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("−")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),i("span",{staticClass:"mord"},[t._v("1")]),i("span",{staticClass:"mclose"},[t._v(")")]),i("span",{staticClass:"mpunct"},[t._v(",")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"1em"}}),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03148em"}},[t._v("k")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"mrel"},[t._v("∈")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),i("span",{staticClass:"mopen"},[t._v("[")]),i("span",{staticClass:"mord"},[t._v("1")]),i("span",{staticClass:"mpunct"},[t._v(",")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord mathnormal"},[t._v("m")]),i("span",{staticClass:"mclose"},[t._v("]")])])])])])]),t._v(" "),i("p",[t._v("其中m为用于探测的fmap个数，SSD300（上图）中为6，k为当前的fmap索引。不难发现，一开始scale比较小，fmap也比较大，可以用于探测小物体，后面锚框逐渐变大，用于探测大物体。")]),t._v(" "),i("p",[t._v("由于每个fmap的scale是固定的，因此锚框的个数主要由ratio个数决定。作者选取了5个ratio（1,2,3,1/2,1/3），其中在某些fmap丢弃3与1/3的ratio，对于ratio为1的情况，还增加了一个"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mi",[t._v("s")]),i("mi",[t._v("c")]),i("mi",[t._v("a")]),i("mi",[t._v("l")]),i("mi",[t._v("e")]),i("mo",[t._v("=")]),i("msqrt",[i("mrow",[i("msub",[i("mi",[t._v("s")]),i("mi",[t._v("k")])],1),i("msub",[i("mi",[t._v("s")]),i("mrow",[i("mi",[t._v("k")]),i("mo",[t._v("+")]),i("mn",[t._v("1")])],1)],1)],1)],1)],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("scale=\\sqrt{s_{k} s_{k+1}}")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.69444em","vertical-align":"0em"}}),i("span",{staticClass:"mord mathnormal"},[t._v("s")]),i("span",{staticClass:"mord mathnormal"},[t._v("c")]),i("span",{staticClass:"mord mathnormal"},[t._v("a")]),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),i("span",{staticClass:"mord mathnormal"},[t._v("e")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"mrel"},[t._v("=")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"1.04em","vertical-align":"-0.3438855em"}}),i("span",{staticClass:"mord sqrt"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.6961145em"}},[i("span",{staticClass:"svg-align",staticStyle:{top:"-3em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"mord",staticStyle:{"padding-left":"0.833em"}},[i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[t._v("s")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[t._v("k")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[t._v("s")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.3361079999999999em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[t._v("k")]),i("span",{staticClass:"mbin mtight"},[t._v("+")]),i("span",{staticClass:"mord mtight"},[t._v("1")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.208331em"}},[i("span")])])])])])])]),i("span",{staticStyle:{top:"-2.6561145em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"hide-tail",staticStyle:{"min-width":"0.853em",height:"1.08em"}},[i("svg",{attrs:{width:"400em",height:"1.08em",viewBox:"0 0 400000 1080",preserveAspectRatio:"xMinYMin slice"}},[i("path",{attrs:{d:"M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z"}})])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.3438855em"}},[i("span")])])])])])])]),t._v("的锚框，总共形成6个锚框（部分4个）。为了使锚框中心位于像素中心，计算坐标时还加了0.5的偏置，公式为：")]),t._v(" "),i("p",{staticClass:"katex-block"},[i("span",{staticClass:"katex-display"},[i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[i("semantics",[i("mrow",[i("mo",{attrs:{fence:"true"}},[t._v("(")]),i("mfrac",[i("mrow",[i("mi",[t._v("i")]),i("mo",[t._v("+")]),i("mn",[t._v("0.5")])],1),i("mrow",[i("mo",{attrs:{fence:"true"}},[t._v("∣")]),i("msub",[i("mi",[t._v("f")]),i("mi",[t._v("k")])],1),i("mo",{attrs:{fence:"true"}},[t._v("∣")])],1)],1),i("mo",{attrs:{separator:"true"}},[t._v(",")]),i("mfrac",[i("mrow",[i("mi",[t._v("j")]),i("mo",[t._v("+")]),i("mn",[t._v("0.5")])],1),i("mrow",[i("mo",{attrs:{fence:"true"}},[t._v("∣")]),i("msub",[i("mi",[t._v("f")]),i("mi",[t._v("k")])],1),i("mo",{attrs:{fence:"true"}},[t._v("∣")])],1)],1),i("mo",{attrs:{fence:"true"}},[t._v(")")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("\\left(\\frac{i+0.5}{\\left|f_{k}\\right|}, \\frac{j+0.5}{\\left|f_{k}\\right|}\\right)\n")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"2.40003em","vertical-align":"-0.95003em"}}),i("span",{staticClass:"minner"},[i("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[i("span",{staticClass:"delimsizing size3"},[t._v("(")])]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mopen nulldelimiter"}),i("span",{staticClass:"mfrac"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.3365200000000002em"}},[i("span",{staticStyle:{top:"-2.314em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"minner"},[i("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[t._v("∣")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.10764em"}},[t._v("f")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.10764em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[t._v("k")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[t._v("∣")])])])]),i("span",{staticStyle:{top:"-3.23em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),i("span",{staticStyle:{top:"-3.677em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[t._v("i")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("+")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mord"},[t._v("0")]),i("span",{staticClass:"mord"},[t._v(".")]),i("span",{staticClass:"mord"},[t._v("5")])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.936em"}},[i("span")])])])]),i("span",{staticClass:"mclose nulldelimiter"})]),i("span",{staticClass:"mpunct"},[t._v(",")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mopen nulldelimiter"}),i("span",{staticClass:"mfrac"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.3365200000000002em"}},[i("span",{staticStyle:{top:"-2.314em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"minner"},[i("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[t._v("∣")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.10764em"}},[t._v("f")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.10764em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[t._v("k")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[t._v("∣")])])])]),i("span",{staticStyle:{top:"-3.23em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),i("span",{staticStyle:{top:"-3.677em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.05724em"}},[t._v("j")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("+")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mord"},[t._v("0")]),i("span",{staticClass:"mord"},[t._v(".")]),i("span",{staticClass:"mord"},[t._v("5")])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.936em"}},[i("span")])])])]),i("span",{staticClass:"mclose nulldelimiter"})]),i("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[i("span",{staticClass:"delimsizing size3"},[t._v(")")])])])])])])])]),t._v(" "),i("p",[t._v("其中"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mi",{attrs:{mathvariant:"normal"}},[t._v("∣")]),i("msub",[i("mi",[t._v("f")]),i("mi",[t._v("k")])],1),i("mi",{attrs:{mathvariant:"normal"}},[t._v("∣")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("|f_k|")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),i("span",{staticClass:"mord"},[t._v("∣")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.10764em"}},[t._v("f")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.10764em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[t._v("k")])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mord"},[t._v("∣")])])])]),t._v("是第k个fmap的大小，i,j为像素索引，"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mi",[t._v("i")]),i("mo",{attrs:{separator:"true"}},[t._v(",")]),i("mi",[t._v("j")]),i("mo",[t._v("∈")]),i("mrow",[i("mo",{attrs:{fence:"true"}},[t._v("[")]),i("mn",[t._v("0")]),i("mo",{attrs:{separator:"true"}},[t._v(",")]),i("mrow",[i("mo",{attrs:{fence:"true"}},[t._v("∣")]),i("msub",[i("mi",[t._v("f")]),i("mi",[t._v("k")])],1),i("mo",{attrs:{fence:"true"}},[t._v("∣")])],1),i("mo",{attrs:{fence:"true"}},[t._v(")")])],1)],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("i, j \\in\\left[0,\\left|f_{k}\\right|\\right)")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.85396em","vertical-align":"-0.19444em"}}),i("span",{staticClass:"mord mathnormal"},[t._v("i")]),i("span",{staticClass:"mpunct"},[t._v(",")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.05724em"}},[t._v("j")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"mrel"},[t._v("∈")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),i("span",{staticClass:"minner"},[i("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[t._v("[")]),i("span",{staticClass:"mord"},[t._v("0")]),i("span",{staticClass:"mpunct"},[t._v(",")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"minner"},[i("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[t._v("∣")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.10764em"}},[t._v("f")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"-0.10764em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[t._v("k")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[t._v("∣")])]),i("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[t._v(")")])])])])])]),t._v(" "),i("h3",{attrs:{id:"锚框的标注"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#锚框的标注"}},[t._v("#")]),t._v(" 锚框的标注")]),t._v(" "),i("p",[t._v("锚框的标注仍使用IoU最大的先匹配，优先匹配完所有的gt bbox。随后，对于剩余的锚框，若最大IoU大于0.5，也进行相应匹配。匹配的同时标注类别，计算offset。")]),t._v(" "),i("h3",{attrs:{id:"模型预测"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#模型预测"}},[t._v("#")]),t._v(" 模型预测")]),t._v(" "),i("p",[t._v("在模型预测方面，使用特定fmap33same卷积后的结果，设置一定的通道数。设目标的类别个数为"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mi",[t._v("q")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("q")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.625em","vertical-align":"-0.19444em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[t._v("q")])])])]),t._v("。每个锚框的类别个数将是"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mi",[t._v("q")]),i("mo",[t._v("+")]),i("mn",[t._v("1")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("q+1")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.7777700000000001em","vertical-align":"-0.19444em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[t._v("q")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("+")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.64444em","vertical-align":"0em"}}),i("span",{staticClass:"mord"},[t._v("1")])])])]),t._v("，其中类别0表示锚框只包含背景。在某个尺度下，设特征图的高和宽分别为"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mi",[t._v("h")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("h")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.69444em","vertical-align":"0em"}}),i("span",{staticClass:"mord mathnormal"},[t._v("h")])])])]),t._v("和"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mi",[t._v("w")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("w")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.43056em","vertical-align":"0em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02691em"}},[t._v("w")])])])]),t._v("，如果以其中每个单元为中心生成"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mi",[t._v("a")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("a")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.43056em","vertical-align":"0em"}}),i("span",{staticClass:"mord mathnormal"},[t._v("a")])])])]),t._v("个锚框，那么我们需要对"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mi",[t._v("h")]),i("mi",[t._v("w")]),i("mi",[t._v("a")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("hwa")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.69444em","vertical-align":"0em"}}),i("span",{staticClass:"mord mathnormal"},[t._v("h")]),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02691em"}},[t._v("w")]),i("span",{staticClass:"mord mathnormal"},[t._v("a")])])])]),t._v("个锚框进行分类。如果使用全连接层作为输出，很容易导致模型参数过多。因此可以使用3x3的same卷积，类别输出通道数为"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mi",[t._v("a")]),i("mo",[t._v("×")]),i("mo",{attrs:{stretchy:"false"}},[t._v("(")]),i("mi",[t._v("q")]),i("mo",[t._v("+")]),i("mn",[t._v("1")]),i("mo",{attrs:{stretchy:"false"}},[t._v(")")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("a\\times(q+1)")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.66666em","vertical-align":"-0.08333em"}}),i("span",{staticClass:"mord mathnormal"},[t._v("a")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("×")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),i("span",{staticClass:"mopen"},[t._v("(")]),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[t._v("q")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("+")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),i("span",{staticClass:"mord"},[t._v("1")]),i("span",{staticClass:"mclose"},[t._v(")")])])])]),t._v("，对应每个像素a个锚框在q+1类的score，offset输出通道数为"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mi",[t._v("a")]),i("mo",[t._v("×")]),i("mn",[t._v("4")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("a\\times4")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.66666em","vertical-align":"-0.08333em"}}),i("span",{staticClass:"mord mathnormal"},[t._v("a")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("×")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.64444em","vertical-align":"0em"}}),i("span",{staticClass:"mord"},[t._v("4")])])])]),t._v("，对应每个像素a个锚框的4个偏置。")]),t._v(" "),i("p",[t._v("d2l中使用"),i("code",[t._v("cls_predictor")]),t._v("来预测类别，"),i("code",[t._v("bbox_predictor")]),t._v("来预测偏置：")]),t._v(" "),i("div",{staticClass:"language-python line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-python"}},[i("code",[i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token function"}},[t._v("cls_predictor")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num_inputs"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" num_anchors"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" num_classes"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" nn"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Conv2d"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num_inputs"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" num_anchors "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num_classes "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                     kernel_size"),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" padding"),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token function"}},[t._v("bbox_predictor")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num_inputs"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" num_anchors"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" nn"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Conv2d"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num_inputs"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" num_anchors "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" kernel_size"),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" padding"),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[t._v("1")]),i("br"),i("span",{staticClass:"line-number"},[t._v("2")]),i("br"),i("span",{staticClass:"line-number"},[t._v("3")]),i("br"),i("span",{staticClass:"line-number"},[t._v("4")]),i("br"),i("span",{staticClass:"line-number"},[t._v("5")]),i("br"),i("span",{staticClass:"line-number"},[t._v("6")]),i("br")])]),i("p",[t._v("在编程时，卷积后输出为 (batch size, number of channels, height, width)，后三个维度可能不同层输出不一样，无法合并结果。d2l中的策略是，将channels（预测结果）调到最后一个维度，然后将这三个维度合并，只留下两个维度，后期使用结果是只需要reshape成（batch size，-1， num_classes + 1）或者（batch size，-1， 4）。第二个维度自然会变成锚框个数。")]),t._v(" "),i("h3",{attrs:{id:"完整的简易模型"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#完整的简易模型"}},[t._v("#")]),t._v(" 完整的简易模型")]),t._v(" "),i("p",[t._v("d2l中，作者实现了一个简易版的SSD模型，代码如下：")]),t._v(" "),i("div",{staticClass:"language-python line-numbers-mode"},[i("pre",{pre:!0,attrs:{class:"language-python"}},[i("code",[t._v("sizes "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.272")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.37")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.447")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.54")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.619")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.71")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.79")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n         "),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.88")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.961")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nratios "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\nnum_anchors "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("len")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sizes"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("len")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ratios"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\n"),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token function"}},[t._v("base_net")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    blk "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    num_filters "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" i "),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("range")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),i("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("len")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num_filters"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        blk"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("down_sample_blk"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num_filters"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" num_filters"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" nn"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Sequential"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("blk"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token function"}},[t._v("down_sample_blk")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in_channels"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" out_channels"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    blk "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" _ "),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("range")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        blk"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nn"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Conv2d"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in_channels"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" out_channels"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                             kernel_size"),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" padding"),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        blk"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nn"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BatchNorm2d"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("out_channels"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        blk"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nn"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ReLU"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        in_channels "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" out_channels\n    blk"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nn"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MaxPool2d"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" nn"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Sequential"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("blk"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_blk")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" i "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        blk "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" base_net"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("elif")]),t._v(" i "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        blk "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" down_sample_blk"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("128")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("elif")]),t._v(" i "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        blk "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" nn"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AdaptiveMaxPool2d"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        blk "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" down_sample_blk"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("128")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("128")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" blk\n\n"),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token function"}},[t._v("blk_forward")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("X"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" blk"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" size"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ratio"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cls_predictor"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bbox_predictor"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    Y "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" blk"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("X"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    anchors "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" d2l"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("multibox_prior"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Y"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sizes"),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("size"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ratios"),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ratio"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    cls_preds "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cls_predictor"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Y"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    bbox_preds "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bbox_predictor"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Y"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Y"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" anchors"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cls_preds"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bbox_preds"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TinySSD")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nn"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Module"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token function"}},[t._v("__init__")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" num_classes"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("kwargs"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),i("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("super")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TinySSD"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" self"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__init__"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("kwargs"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        self"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("num_classes "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" num_classes\n        idx_to_in_channels "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("128")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("128")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("128")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("128")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" i "),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("range")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),i("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The assignment statement is self.blk_i = get_blk(i)")]),t._v("\n            "),i("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("setattr")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token string-interpolation"}},[i("span",{pre:!0,attrs:{class:"token string"}},[t._v("f'blk_")]),i("span",{pre:!0,attrs:{class:"token interpolation"}},[i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("i"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),i("span",{pre:!0,attrs:{class:"token string"}},[t._v("'")])]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" get_blk"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),i("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("setattr")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token string-interpolation"}},[i("span",{pre:!0,attrs:{class:"token string"}},[t._v("f'cls_")]),i("span",{pre:!0,attrs:{class:"token interpolation"}},[i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("i"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),i("span",{pre:!0,attrs:{class:"token string"}},[t._v("'")])]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cls_predictor"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("idx_to_in_channels"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" num_anchors"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" num_classes"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),i("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("setattr")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token string-interpolation"}},[i("span",{pre:!0,attrs:{class:"token string"}},[t._v("f'bbox_")]),i("span",{pre:!0,attrs:{class:"token interpolation"}},[i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("i"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),i("span",{pre:!0,attrs:{class:"token string"}},[t._v("'")])]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bbox_predictor"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("idx_to_in_channels"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" num_anchors"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token function"}},[t._v("forward")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" X"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        anchors"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cls_preds"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bbox_preds "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),i("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),i("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),i("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n        "),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" i "),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("range")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),i("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# getattr(self, 'blk_%d' % i) accesses self.blk_i")]),t._v("\n            X"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" anchors"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cls_preds"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bbox_preds"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" blk_forward"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                X"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("getattr")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token string-interpolation"}},[i("span",{pre:!0,attrs:{class:"token string"}},[t._v("f'blk_")]),i("span",{pre:!0,attrs:{class:"token interpolation"}},[i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("i"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),i("span",{pre:!0,attrs:{class:"token string"}},[t._v("'")])]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sizes"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ratios"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),i("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("getattr")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token string-interpolation"}},[i("span",{pre:!0,attrs:{class:"token string"}},[t._v("f'cls_")]),i("span",{pre:!0,attrs:{class:"token interpolation"}},[i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("i"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),i("span",{pre:!0,attrs:{class:"token string"}},[t._v("'")])]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("getattr")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token string-interpolation"}},[i("span",{pre:!0,attrs:{class:"token string"}},[t._v("f'bbox_")]),i("span",{pre:!0,attrs:{class:"token interpolation"}},[i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("i"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),i("span",{pre:!0,attrs:{class:"token string"}},[t._v("'")])]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),i("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# In the reshape function, 0 indicates that the batch size remains")]),t._v("\n        "),i("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# unchanged")]),t._v("\n        anchors "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" torch"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cat"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("anchors"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dim"),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        cls_preds "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" concat_preds"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cls_preds"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        cls_preds "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cls_preds"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reshape"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cls_preds"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("shape"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" self"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("num_classes "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),i("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        bbox_preds "),i("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" concat_preds"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bbox_preds"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),i("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" anchors"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cls_preds"),i("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bbox_preds\n")])]),t._v(" "),i("div",{staticClass:"line-numbers-wrapper"},[i("span",{staticClass:"line-number"},[t._v("1")]),i("br"),i("span",{staticClass:"line-number"},[t._v("2")]),i("br"),i("span",{staticClass:"line-number"},[t._v("3")]),i("br"),i("span",{staticClass:"line-number"},[t._v("4")]),i("br"),i("span",{staticClass:"line-number"},[t._v("5")]),i("br"),i("span",{staticClass:"line-number"},[t._v("6")]),i("br"),i("span",{staticClass:"line-number"},[t._v("7")]),i("br"),i("span",{staticClass:"line-number"},[t._v("8")]),i("br"),i("span",{staticClass:"line-number"},[t._v("9")]),i("br"),i("span",{staticClass:"line-number"},[t._v("10")]),i("br"),i("span",{staticClass:"line-number"},[t._v("11")]),i("br"),i("span",{staticClass:"line-number"},[t._v("12")]),i("br"),i("span",{staticClass:"line-number"},[t._v("13")]),i("br"),i("span",{staticClass:"line-number"},[t._v("14")]),i("br"),i("span",{staticClass:"line-number"},[t._v("15")]),i("br"),i("span",{staticClass:"line-number"},[t._v("16")]),i("br"),i("span",{staticClass:"line-number"},[t._v("17")]),i("br"),i("span",{staticClass:"line-number"},[t._v("18")]),i("br"),i("span",{staticClass:"line-number"},[t._v("19")]),i("br"),i("span",{staticClass:"line-number"},[t._v("20")]),i("br"),i("span",{staticClass:"line-number"},[t._v("21")]),i("br"),i("span",{staticClass:"line-number"},[t._v("22")]),i("br"),i("span",{staticClass:"line-number"},[t._v("23")]),i("br"),i("span",{staticClass:"line-number"},[t._v("24")]),i("br"),i("span",{staticClass:"line-number"},[t._v("25")]),i("br"),i("span",{staticClass:"line-number"},[t._v("26")]),i("br"),i("span",{staticClass:"line-number"},[t._v("27")]),i("br"),i("span",{staticClass:"line-number"},[t._v("28")]),i("br"),i("span",{staticClass:"line-number"},[t._v("29")]),i("br"),i("span",{staticClass:"line-number"},[t._v("30")]),i("br"),i("span",{staticClass:"line-number"},[t._v("31")]),i("br"),i("span",{staticClass:"line-number"},[t._v("32")]),i("br"),i("span",{staticClass:"line-number"},[t._v("33")]),i("br"),i("span",{staticClass:"line-number"},[t._v("34")]),i("br"),i("span",{staticClass:"line-number"},[t._v("35")]),i("br"),i("span",{staticClass:"line-number"},[t._v("36")]),i("br"),i("span",{staticClass:"line-number"},[t._v("37")]),i("br"),i("span",{staticClass:"line-number"},[t._v("38")]),i("br"),i("span",{staticClass:"line-number"},[t._v("39")]),i("br"),i("span",{staticClass:"line-number"},[t._v("40")]),i("br"),i("span",{staticClass:"line-number"},[t._v("41")]),i("br"),i("span",{staticClass:"line-number"},[t._v("42")]),i("br"),i("span",{staticClass:"line-number"},[t._v("43")]),i("br"),i("span",{staticClass:"line-number"},[t._v("44")]),i("br"),i("span",{staticClass:"line-number"},[t._v("45")]),i("br"),i("span",{staticClass:"line-number"},[t._v("46")]),i("br"),i("span",{staticClass:"line-number"},[t._v("47")]),i("br"),i("span",{staticClass:"line-number"},[t._v("48")]),i("br"),i("span",{staticClass:"line-number"},[t._v("49")]),i("br"),i("span",{staticClass:"line-number"},[t._v("50")]),i("br"),i("span",{staticClass:"line-number"},[t._v("51")]),i("br"),i("span",{staticClass:"line-number"},[t._v("52")]),i("br"),i("span",{staticClass:"line-number"},[t._v("53")]),i("br"),i("span",{staticClass:"line-number"},[t._v("54")]),i("br"),i("span",{staticClass:"line-number"},[t._v("55")]),i("br"),i("span",{staticClass:"line-number"},[t._v("56")]),i("br"),i("span",{staticClass:"line-number"},[t._v("57")]),i("br"),i("span",{staticClass:"line-number"},[t._v("58")]),i("br"),i("span",{staticClass:"line-number"},[t._v("59")]),i("br"),i("span",{staticClass:"line-number"},[t._v("60")]),i("br"),i("span",{staticClass:"line-number"},[t._v("61")]),i("br"),i("span",{staticClass:"line-number"},[t._v("62")]),i("br"),i("span",{staticClass:"line-number"},[t._v("63")]),i("br"),i("span",{staticClass:"line-number"},[t._v("64")]),i("br"),i("span",{staticClass:"line-number"},[t._v("65")]),i("br"),i("span",{staticClass:"line-number"},[t._v("66")]),i("br")])]),i("h3",{attrs:{id:"数据增强"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#数据增强"}},[t._v("#")]),t._v(" 数据增强")]),t._v(" "),i("p",[t._v("论文中作者提到，模型训练时使用了不同策略的数据增强以防止过拟合。策略主要有随机裁剪、水平翻转、形变等。")]),t._v(" "),i("h3",{attrs:{id:"损失函数"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#损失函数"}},[t._v("#")]),t._v(" 损失函数")]),t._v(" "),i("p",[t._v("模型的损失函数主要有两部分组成，分别为位置损失（localization loss）与类别损失（confidence loss）。")]),t._v(" "),i("p",{staticClass:"katex-block"},[i("span",{staticClass:"katex-display"},[i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[i("semantics",[i("mrow",[i("mi",[t._v("L")]),i("mo",{attrs:{stretchy:"false"}},[t._v("(")]),i("mi",[t._v("x")]),i("mo",{attrs:{separator:"true"}},[t._v(",")]),i("mi",[t._v("c")]),i("mo",{attrs:{separator:"true"}},[t._v(",")]),i("mi",[t._v("l")]),i("mo",{attrs:{separator:"true"}},[t._v(",")]),i("mi",[t._v("g")]),i("mo",{attrs:{stretchy:"false"}},[t._v(")")]),i("mo",[t._v("=")]),i("mfrac",[i("mn",[t._v("1")]),i("mi",[t._v("N")])],1),i("mrow",[i("mo",{attrs:{fence:"true"}},[t._v("(")]),i("msub",[i("mi",[t._v("L")]),i("mi",{attrs:{mathvariant:"normal"}},[t._v("conf")]),i("mo",[t._v("⁡")])],1),i("mo",{attrs:{stretchy:"false"}},[t._v("(")]),i("mi",[t._v("x")]),i("mo",{attrs:{separator:"true"}},[t._v(",")]),i("mi",[t._v("c")]),i("mo",{attrs:{stretchy:"false"}},[t._v(")")]),i("mo",[t._v("+")]),i("mi",[t._v("α")]),i("msub",[i("mi",[t._v("L")]),i("mrow",[i("mi",[t._v("l")]),i("mi",[t._v("o")]),i("mi",[t._v("c")])],1)],1),i("mo",{attrs:{stretchy:"false"}},[t._v("(")]),i("mi",[t._v("x")]),i("mo",{attrs:{separator:"true"}},[t._v(",")]),i("mi",[t._v("l")]),i("mo",{attrs:{separator:"true"}},[t._v(",")]),i("mi",[t._v("g")]),i("mo",{attrs:{stretchy:"false"}},[t._v(")")]),i("mo",{attrs:{fence:"true"}},[t._v(")")])],1)],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("L(x, c, l, g)=\\frac{1}{N}\\left(L_{\\operatorname{conf}}(x, c)+\\alpha L_{l o c}(x, l, g)\\right)\n")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),i("span",{staticClass:"mord mathnormal"},[t._v("L")]),i("span",{staticClass:"mopen"},[t._v("(")]),i("span",{staticClass:"mord mathnormal"},[t._v("x")]),i("span",{staticClass:"mpunct"},[t._v(",")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord mathnormal"},[t._v("c")]),i("span",{staticClass:"mpunct"},[t._v(",")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),i("span",{staticClass:"mpunct"},[t._v(",")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[t._v("g")]),i("span",{staticClass:"mclose"},[t._v(")")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"mrel"},[t._v("=")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"2.00744em","vertical-align":"-0.686em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mopen nulldelimiter"}),i("span",{staticClass:"mfrac"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.32144em"}},[i("span",{staticStyle:{top:"-2.314em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.10903em"}},[t._v("N")])])]),i("span",{staticStyle:{top:"-3.23em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),i("span",{staticStyle:{top:"-3.677em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord"},[t._v("1")])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.686em"}},[i("span")])])])]),i("span",{staticClass:"mclose nulldelimiter"})]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"minner"},[i("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[t._v("(")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[t._v("L")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mop mtight"},[i("span",{staticClass:"mord mathrm mtight"},[t._v("c")]),i("span",{staticClass:"mord mathrm mtight"},[t._v("o")]),i("span",{staticClass:"mord mathrm mtight"},[t._v("n")]),i("span",{staticClass:"mord mathrm mtight",staticStyle:{"margin-right":"0.07778em"}},[t._v("f")])])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mopen"},[t._v("(")]),i("span",{staticClass:"mord mathnormal"},[t._v("x")]),i("span",{staticClass:"mpunct"},[t._v(",")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord mathnormal"},[t._v("c")]),i("span",{staticClass:"mclose"},[t._v(")")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("+")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.0037em"}},[t._v("α")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[t._v("L")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),i("span",{staticClass:"mord mathnormal mtight"},[t._v("o")]),i("span",{staticClass:"mord mathnormal mtight"},[t._v("c")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mopen"},[t._v("(")]),i("span",{staticClass:"mord mathnormal"},[t._v("x")]),i("span",{staticClass:"mpunct"},[t._v(",")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),i("span",{staticClass:"mpunct"},[t._v(",")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[t._v("g")]),i("span",{staticClass:"mclose"},[t._v(")")]),i("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[t._v(")")])])])])])])]),t._v(" "),i("p",[t._v("其中，"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("mi",[t._v("α")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("\\alpha")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.43056em","vertical-align":"0em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.0037em"}},[t._v("α")])])])]),t._v("设为1。"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("msub",[i("mi",[t._v("L")]),i("mrow",[i("mi",[t._v("c")]),i("mi",[t._v("o")]),i("mi",[t._v("n")]),i("mi",[t._v("f")])],1)],1)],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("L_{conf}")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.969438em","vertical-align":"-0.286108em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[t._v("L")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.3361079999999999em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("c")]),i("span",{staticClass:"mord mathnormal mtight"},[t._v("o")]),i("span",{staticClass:"mord mathnormal mtight"},[t._v("n")]),i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.10764em"}},[t._v("f")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[i("span")])])])])])])])]),t._v("选用交叉熵损失函数，"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("msub",[i("mi",[t._v("L")]),i("mrow",[i("mi",[t._v("l")]),i("mi",[t._v("o")]),i("mi",[t._v("c")])],1)],1)],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("L_{loc}")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.83333em","vertical-align":"-0.15em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[t._v("L")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),i("span",{staticClass:"mord mathnormal mtight"},[t._v("o")]),i("span",{staticClass:"mord mathnormal mtight"},[t._v("c")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])])])])]),t._v("使用Smooth L1函数：")]),t._v(" "),i("p",{staticClass:"katex-block"},[i("span",{staticClass:"katex-display"},[i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[i("semantics",[i("mtable",{attrs:{rowspacing:"0.24999999999999992em",columnalign:"right",columnspacing:""}},[i("mtr",[i("mtd",[i("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[i("mrow",[i("msub",[i("mi",[t._v("L")]),i("mrow",[i("mi",[t._v("l")]),i("mi",[t._v("o")]),i("mi",[t._v("c")])],1)],1),i("mo",{attrs:{stretchy:"false"}},[t._v("(")]),i("mi",[t._v("x")]),i("mo",{attrs:{separator:"true"}},[t._v(",")]),i("mi",[t._v("l")]),i("mo",{attrs:{separator:"true"}},[t._v(",")]),i("mi",[t._v("g")]),i("mo",{attrs:{stretchy:"false"}},[t._v(")")]),i("mo",[t._v("=")]),i("munderover",[i("mo",[t._v("∑")]),i("mrow",[i("mi",[t._v("i")]),i("mo",[t._v("∈")]),i("mi",[t._v("P")]),i("mi",[t._v("o")]),i("mi",[t._v("s")])],1),i("mi",[t._v("N")])],1),i("munder",[i("mo",[t._v("∑")]),i("mrow",[i("mi",[t._v("m")]),i("mo",[t._v("∈")]),i("mo",{attrs:{stretchy:"false"}},[t._v("{")]),i("mi",[t._v("c")]),i("mi",[t._v("x")]),i("mo",{attrs:{separator:"true"}},[t._v(",")]),i("mi",[t._v("c")]),i("mi",[t._v("y")]),i("mo",{attrs:{separator:"true"}},[t._v(",")]),i("mi",[t._v("w")]),i("mo",{attrs:{separator:"true"}},[t._v(",")]),i("mi",[t._v("h")]),i("mo",{attrs:{stretchy:"false"}},[t._v("}")])],1)],1),i("msubsup",[i("mi",[t._v("x")]),i("mrow",[i("mi",[t._v("i")]),i("mi",[t._v("j")])],1),i("mi",[t._v("k")])],1),i("msub",[i("mo",[i("mi",{attrs:{mathvariant:"normal"}},[t._v("smooth")]),i("mo",[t._v("⁡")])],1),i("mrow",[i("mi",{attrs:{mathvariant:"normal"}},[t._v("L")]),i("mn",[t._v("1")])],1)],1),i("mrow",[i("mo",{attrs:{fence:"true"}},[t._v("(")]),i("msubsup",[i("mi",[t._v("l")]),i("mi",[t._v("i")]),i("mi",[t._v("m")])],1),i("mo",[t._v("−")]),i("msubsup",[i("mover",{attrs:{accent:"true"}},[i("mi",[t._v("g")]),i("mo",[t._v("^")])],1),i("mi",[t._v("j")]),i("mi",[t._v("m")])],1),i("mo",{attrs:{fence:"true"}},[t._v(")")])],1)],1)],1)],1)],1),i("mtr",[i("mtd",[i("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[i("mrow",[i("msubsup",[i("mover",{attrs:{accent:"true"}},[i("mi",[t._v("g")]),i("mo",[t._v("^")])],1),i("mi",[t._v("j")]),i("mrow",[i("mi",[t._v("c")]),i("mi",[t._v("x")])],1)],1),i("mo",[t._v("=")]),i("mrow",[i("mo",{attrs:{fence:"true"}},[t._v("(")]),i("msubsup",[i("mi",[t._v("g")]),i("mi",[t._v("j")]),i("mrow",[i("mi",[t._v("c")]),i("mi",[t._v("x")])],1)],1),i("mo",[t._v("−")]),i("msubsup",[i("mi",[t._v("d")]),i("mi",[t._v("i")]),i("mrow",[i("mi",[t._v("c")]),i("mi",[t._v("x")])],1)],1),i("mo",{attrs:{fence:"true"}},[t._v(")")])],1),i("mi",{attrs:{mathvariant:"normal"}},[t._v("/")]),i("msubsup",[i("mi",[t._v("d")]),i("mi",[t._v("i")]),i("mi",[t._v("w")])],1),i("mspace",{attrs:{width:"1em"}}),i("msubsup",[i("mover",{attrs:{accent:"true"}},[i("mi",[t._v("g")]),i("mo",[t._v("^")])],1),i("mi",[t._v("j")]),i("mrow",[i("mi",[t._v("c")]),i("mi",[t._v("y")])],1)],1),i("mo",[t._v("=")]),i("mrow",[i("mo",{attrs:{fence:"true"}},[t._v("(")]),i("msubsup",[i("mi",[t._v("g")]),i("mi",[t._v("j")]),i("mrow",[i("mi",[t._v("c")]),i("mi",[t._v("y")])],1)],1),i("mo",[t._v("−")]),i("msubsup",[i("mi",[t._v("d")]),i("mi",[t._v("i")]),i("mrow",[i("mi",[t._v("c")]),i("mi",[t._v("y")])],1)],1),i("mo",{attrs:{fence:"true"}},[t._v(")")])],1),i("mi",{attrs:{mathvariant:"normal"}},[t._v("/")]),i("msubsup",[i("mi",[t._v("d")]),i("mi",[t._v("i")]),i("mi",[t._v("h")])],1)],1)],1)],1)],1),i("mtr",[i("mtd",[i("mstyle",{attrs:{scriptlevel:"0",displaystyle:"true"}},[i("mrow",[i("msubsup",[i("mover",{attrs:{accent:"true"}},[i("mi",[t._v("g")]),i("mo",[t._v("^")])],1),i("mi",[t._v("j")]),i("mi",[t._v("w")])],1),i("mo",[t._v("=")]),i("mi",[t._v("log")]),i("mo",[t._v("⁡")]),i("mrow",[i("mo",{attrs:{fence:"true"}},[t._v("(")]),i("mfrac",[i("msubsup",[i("mi",[t._v("g")]),i("mi",[t._v("j")]),i("mi",[t._v("w")])],1),i("msubsup",[i("mi",[t._v("d")]),i("mi",[t._v("i")]),i("mi",[t._v("w")])],1)],1),i("mo",{attrs:{fence:"true"}},[t._v(")")])],1),i("mspace",{attrs:{width:"1em"}}),i("msubsup",[i("mover",{attrs:{accent:"true"}},[i("mi",[t._v("g")]),i("mo",[t._v("^")])],1),i("mi",[t._v("j")]),i("mi",[t._v("h")])],1),i("mo",[t._v("=")]),i("mi",[t._v("log")]),i("mo",[t._v("⁡")]),i("mrow",[i("mo",{attrs:{fence:"true"}},[t._v("(")]),i("mfrac",[i("msubsup",[i("mi",[t._v("g")]),i("mi",[t._v("j")]),i("mi",[t._v("h")])],1),i("msubsup",[i("mi",[t._v("d")]),i("mi",[t._v("i")]),i("mi",[t._v("h")])],1)],1),i("mo",{attrs:{fence:"true"}},[t._v(")")])],1)],1)],1)],1)],1)],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("\\begin{aligned}\nL_{l o c}(x, l, g)=\\sum_{i \\in P o s}^{N} \\sum_{m \\in\\{c x, c y, w, h\\}}  x_{i j}^{k} \\operatorname{smooth}_{\\mathrm{L} 1}\\left(l_{i}^{m}-\\hat{g}_{j}^{m}\\right) \\\\\n\\hat{g}_{j}^{c x}=\\left(g_{j}^{c x}-d_{i}^{c x}\\right) / d_{i}^{w} \\quad \\hat{g}_{j}^{c y}=\\left(g_{j}^{c y}-d_{i}^{c y}\\right) / d_{i}^{h} \\\\\n\\hat{g}_{j}^{w}=\\log \\left(\\frac{g_{j}^{w}}{d_{i}^{w}}\\right) \\quad \\hat{g}_{j}^{h}=\\log \\left(\\frac{g_{j}^{h}}{d_{i}^{h}}\\right)\n\\end{aligned}\n")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"8.556451em","vertical-align":"-4.0282255em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mtable"},[i("span",{staticClass:"col-align-r"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"4.5282255em"}},[i("span",{staticStyle:{top:"-6.5282255em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.828336em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[t._v("L")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.33610799999999996em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),i("span",{staticClass:"mord mathnormal mtight"},[t._v("o")]),i("span",{staticClass:"mord mathnormal mtight"},[t._v("c")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mopen"},[t._v("(")]),i("span",{staticClass:"mord mathnormal"},[t._v("x")]),i("span",{staticClass:"mpunct"},[t._v(",")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),i("span",{staticClass:"mpunct"},[t._v(",")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[t._v("g")]),i("span",{staticClass:"mclose"},[t._v(")")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"mrel"},[t._v("=")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"mop op-limits"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.8283360000000002em"}},[i("span",{staticStyle:{top:"-1.8556639999999998em","margin-left":"0em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("i")]),i("span",{staticClass:"mrel mtight"},[t._v("∈")]),i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.13889em"}},[t._v("P")]),i("span",{staticClass:"mord mathnormal mtight"},[t._v("o")]),i("span",{staticClass:"mord mathnormal mtight"},[t._v("s")])])])]),i("span",{staticStyle:{top:"-3.0500049999999996em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),i("span",[i("span",{staticClass:"mop op-symbol large-op"},[t._v("∑")])])]),i("span",{staticStyle:{top:"-4.300005em","margin-left":"0em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.10903em"}},[t._v("N")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.321706em"}},[i("span")])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mop op-limits"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.050005em"}},[i("span",{staticStyle:{top:"-1.808995em","margin-left":"0em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("m")]),i("span",{staticClass:"mrel mtight"},[t._v("∈")]),i("span",{staticClass:"mopen mtight"},[t._v("{")]),i("span",{staticClass:"mord mathnormal mtight"},[t._v("c")]),i("span",{staticClass:"mord mathnormal mtight"},[t._v("x")]),i("span",{staticClass:"mpunct mtight"},[t._v(",")]),i("span",{staticClass:"mord mathnormal mtight"},[t._v("c")]),i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03588em"}},[t._v("y")]),i("span",{staticClass:"mpunct mtight"},[t._v(",")]),i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[t._v("w")]),i("span",{staticClass:"mpunct mtight"},[t._v(",")]),i("span",{staticClass:"mord mathnormal mtight"},[t._v("h")]),i("span",{staticClass:"mclose mtight"},[t._v("}")])])])]),i("span",{staticStyle:{top:"-3.0500049999999996em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.05em"}}),i("span",[i("span",{staticClass:"mop op-symbol large-op"},[t._v("∑")])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.516005em"}},[i("span")])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[t._v("x")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.899108em"}},[i("span",{staticStyle:{top:"-2.4530000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("i")]),i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[t._v("j")])])])]),i("span",{staticStyle:{top:"-3.1130000000000004em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03148em"}},[t._v("k")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.383108em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mop"},[i("span",{staticClass:"mop"},[i("span",{staticClass:"mord mathrm"},[t._v("s")]),i("span",{staticClass:"mord mathrm"},[t._v("m")]),i("span",{staticClass:"mord mathrm"},[t._v("o")]),i("span",{staticClass:"mord mathrm"},[t._v("o")]),i("span",{staticClass:"mord mathrm"},[t._v("t")]),i("span",{staticClass:"mord mathrm"},[t._v("h")])]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.32833099999999993em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathrm mtight"},[t._v("L")])]),i("span",{staticClass:"mord mtight"},[t._v("1")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.15em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"minner"},[i("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[i("span",{staticClass:"delimsizing size1"},[t._v("(")])]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.7143919999999999em"}},[i("span",{staticStyle:{top:"-2.4530000000000003em","margin-left":"-0.01968em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("i")])])])]),i("span",{staticStyle:{top:"-3.113em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("m")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.247em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("−")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord accent"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.69444em"}},[i("span",{staticStyle:{top:"-3em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[t._v("g")])])]),i("span",{staticStyle:{top:"-3em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"accent-body",staticStyle:{left:"-0.22222em"}},[i("span",{staticClass:"mord"},[t._v("^")])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.19444em"}},[i("span")])])])]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.714392em"}},[i("span",{staticStyle:{top:"-2.4530000000000003em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[t._v("j")])])])]),i("span",{staticStyle:{top:"-3.1130000000000004em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("m")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.383108em"}},[i("span")])])])])]),i("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[i("span",{staticClass:"delimsizing size1"},[t._v(")")])])])])]),i("span",{staticStyle:{top:"-3.8131125000000003em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.828336em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord"},[i("span",{staticClass:"mord accent"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.69444em"}},[i("span",{staticStyle:{top:"-3em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[t._v("g")])])]),i("span",{staticStyle:{top:"-3em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"accent-body",staticStyle:{left:"-0.22222em"}},[i("span",{staticClass:"mord"},[t._v("^")])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.19444em"}},[i("span")])])])]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.714392em"}},[i("span",{staticStyle:{top:"-2.4530000000000003em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[t._v("j")])])])]),i("span",{staticStyle:{top:"-3.1130000000000004em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("c")]),i("span",{staticClass:"mord mathnormal mtight"},[t._v("x")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.383108em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"mrel"},[t._v("=")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"minner"},[i("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[i("span",{staticClass:"delimsizing size1"},[t._v("(")])]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[t._v("g")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.714392em"}},[i("span",{staticStyle:{top:"-2.4530000000000003em","margin-left":"-0.03588em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[t._v("j")])])])]),i("span",{staticStyle:{top:"-3.1130000000000004em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("c")]),i("span",{staticClass:"mord mathnormal mtight"},[t._v("x")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.383108em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("−")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[t._v("d")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.7143919999999999em"}},[i("span",{staticStyle:{top:"-2.4530000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("i")])])])]),i("span",{staticStyle:{top:"-3.113em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("c")]),i("span",{staticClass:"mord mathnormal mtight"},[t._v("x")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.247em"}},[i("span")])])])])]),i("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[i("span",{staticClass:"delimsizing size1"},[t._v(")")])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord"},[t._v("/")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[t._v("d")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.7143919999999999em"}},[i("span",{staticStyle:{top:"-2.4530000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("i")])])])]),i("span",{staticStyle:{top:"-3.113em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[t._v("w")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.247em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"1em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord accent"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.69444em"}},[i("span",{staticStyle:{top:"-3em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[t._v("g")])])]),i("span",{staticStyle:{top:"-3em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"accent-body",staticStyle:{left:"-0.22222em"}},[i("span",{staticClass:"mord"},[t._v("^")])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.19444em"}},[i("span")])])])]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.7823em"}},[i("span",{staticStyle:{top:"-2.4231360000000004em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[t._v("j")])])])]),i("span",{staticStyle:{top:"-3.1809080000000005em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("c")]),i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03588em"}},[t._v("y")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.412972em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"mrel"},[t._v("=")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"minner"},[i("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[i("span",{staticClass:"delimsizing size1"},[t._v("(")])]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[t._v("g")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.7823em"}},[i("span",{staticStyle:{top:"-2.4231360000000004em","margin-left":"-0.03588em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[t._v("j")])])])]),i("span",{staticStyle:{top:"-3.1809080000000005em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("c")]),i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03588em"}},[t._v("y")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.412972em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mbin"},[t._v("−")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222222222222222em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[t._v("d")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.7822999999999999em"}},[i("span",{staticStyle:{top:"-2.4231360000000004em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("i")])])])]),i("span",{staticStyle:{top:"-3.180908em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("c")]),i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.03588em"}},[t._v("y")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.276864em"}},[i("span")])])])])]),i("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[i("span",{staticClass:"delimsizing size1"},[t._v(")")])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord"},[t._v("/")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[t._v("d")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.8991079999999998em"}},[i("span",{staticStyle:{top:"-2.4530000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("i")])])])]),i("span",{staticStyle:{top:"-3.113em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("h")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.247em"}},[i("span")])])])])])])]),i("span",{staticStyle:{top:"-1.3501405000000006em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3.828336em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord"},[i("span",{staticClass:"mord accent"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.69444em"}},[i("span",{staticStyle:{top:"-3em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[t._v("g")])])]),i("span",{staticStyle:{top:"-3em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"accent-body",staticStyle:{left:"-0.22222em"}},[i("span",{staticClass:"mord"},[t._v("^")])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.19444em"}},[i("span")])])])]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.714392em"}},[i("span",{staticStyle:{top:"-2.4530000000000003em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[t._v("j")])])])]),i("span",{staticStyle:{top:"-3.1130000000000004em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[t._v("w")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.383108em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"mrel"},[t._v("=")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"mop"},[t._v("lo"),i("span",{staticStyle:{"margin-right":"0.01389em"}},[t._v("g")])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"minner"},[i("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[i("span",{staticClass:"delimsizing size3"},[t._v("(")])]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mopen nulldelimiter"}),i("span",{staticClass:"mfrac"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.4491640000000001em"}},[i("span",{staticStyle:{top:"-2.314em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[t._v("d")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.6461920000000001em"}},[i("span",{staticStyle:{top:"-2.4231360000000004em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("i")])])])]),i("span",{staticStyle:{top:"-3.0448000000000004em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[t._v("w")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.27686399999999994em"}},[i("span")])])])])])])]),i("span",{staticStyle:{top:"-3.23em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),i("span",{staticStyle:{top:"-3.7847720000000002em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[t._v("g")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.664392em"}},[i("span",{staticStyle:{top:"-2.441336em","margin-left":"-0.03588em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[t._v("j")])])])]),i("span",{staticStyle:{top:"-3.063em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.02691em"}},[t._v("w")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.394772em"}},[i("span")])])])])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.9628639999999999em"}},[i("span")])])])]),i("span",{staticClass:"mclose nulldelimiter"})]),i("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[i("span",{staticClass:"delimsizing size3"},[t._v(")")])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"1em"}}),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord accent"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.69444em"}},[i("span",{staticStyle:{top:"-3em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[t._v("g")])])]),i("span",{staticStyle:{top:"-3em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"accent-body",staticStyle:{left:"-0.22222em"}},[i("span",{staticClass:"mord"},[t._v("^")])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.19444em"}},[i("span")])])])]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.899108em"}},[i("span",{staticStyle:{top:"-2.4530000000000003em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[t._v("j")])])])]),i("span",{staticStyle:{top:"-3.1130000000000004em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("h")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.383108em"}},[i("span")])])])])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"mrel"},[t._v("=")]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),i("span",{staticClass:"mop"},[t._v("lo"),i("span",{staticStyle:{"margin-right":"0.01389em"}},[t._v("g")])]),i("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.16666666666666666em"}}),i("span",{staticClass:"minner"},[i("span",{staticClass:"mopen delimcenter",staticStyle:{top:"0em"}},[i("span",{staticClass:"delimsizing size4"},[t._v("(")])]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mopen nulldelimiter"}),i("span",{staticClass:"mfrac"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"1.63388em"}},[i("span",{staticStyle:{top:"-2.279092em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[t._v("d")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.830908em"}},[i("span",{staticStyle:{top:"-2.4231360000000004em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("i")])])])]),i("span",{staticStyle:{top:"-3.0448000000000004em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("h")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.27686399999999994em"}},[i("span")])])])])])])]),i("span",{staticStyle:{top:"-3.23em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"frac-line",staticStyle:{"border-bottom-width":"0.04em"}})]),i("span",{staticStyle:{top:"-3.7847720000000002em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"3em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[t._v("g")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.849108em"}},[i("span",{staticStyle:{top:"-2.441336em","margin-left":"-0.03588em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.05724em"}},[t._v("j")])])])]),i("span",{staticStyle:{top:"-3.063em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("h")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.394772em"}},[i("span")])])])])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.9977719999999999em"}},[i("span")])])])]),i("span",{staticClass:"mclose nulldelimiter"})]),i("span",{staticClass:"mclose delimcenter",staticStyle:{top:"0em"}},[i("span",{staticClass:"delimsizing size4"},[t._v(")")])])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"4.0282255em"}},[i("span")])])])])])])])])])])]),t._v(" "),i("h3",{attrs:{id:"hard-negative-mining"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#hard-negative-mining"}},[t._v("#")]),t._v(" Hard negative mining")]),t._v(" "),i("p",[t._v("在进行锚框标注后，可能会出现大量的负样本，造成负样本数量远大于正样本，因此作者使用了Hard negative mining的策略。")]),t._v(" "),i("p",[t._v("对负样本分类时候，loss比较大（label与prediction相差较大）的那些样本，也可以说是容易将负样本看成正样本的那些样本，例如锚框里没有物体，全是背景，这时候分类器很容易正确分类成背景，这个就叫easy negative；如果锚框里有二分之一个物体，标签仍是负样本，这时候分类器就容易把他看成正样本，这时候就是hard negative。")]),t._v(" "),i("p",[t._v("作者把负样本中的"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[i("semantics",[i("mrow",[i("msub",[i("mi",[t._v("L")]),i("mrow",[i("mi",[t._v("c")]),i("mi",[t._v("o")]),i("mi",[t._v("n")]),i("mi",[t._v("f")])],1)],1)],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("L_{conf}")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"base"},[i("span",{staticClass:"strut",staticStyle:{height:"0.969438em","vertical-align":"-0.286108em"}}),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathnormal"},[t._v("L")]),i("span",{staticClass:"msupsub"},[i("span",{staticClass:"vlist-t vlist-t2"},[i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.3361079999999999em"}},[i("span",{staticStyle:{top:"-2.5500000000000003em","margin-left":"0em","margin-right":"0.05em"}},[i("span",{staticClass:"pstrut",staticStyle:{height:"2.7em"}}),i("span",{staticClass:"sizing reset-size6 size3 mtight"},[i("span",{staticClass:"mord mtight"},[i("span",{staticClass:"mord mathnormal mtight"},[t._v("c")]),i("span",{staticClass:"mord mathnormal mtight"},[t._v("o")]),i("span",{staticClass:"mord mathnormal mtight"},[t._v("n")]),i("span",{staticClass:"mord mathnormal mtight",staticStyle:{"margin-right":"0.10764em"}},[t._v("f")])])])])]),i("span",{staticClass:"vlist-s"},[t._v("​")])]),i("span",{staticClass:"vlist-r"},[i("span",{staticClass:"vlist",staticStyle:{height:"0.286108em"}},[i("span")])])])])])])])]),t._v("进行排序，只保留loss较大的负样本，使正负样本比例最多为1:3。")]),t._v(" "),i("h3",{attrs:{id:"总结"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),i("p",[t._v("总的来说，SSD具有如下主要特点：")]),t._v(" "),i("ul",[i("li",[i("p",[t._v("目标检测速度是比较快")])]),t._v(" "),i("li",[i("p",[t._v("从YOLO中继承了将detection转化为regression的思路，一次完成目标定位与分类")])]),t._v(" "),i("li",[i("p",[t._v("基于Faster RCNN中的Anchor，提出了相似的Prior box")])]),t._v(" "),i("li",[i("p",[t._v("运用了多尺度的检测方式")])]),t._v(" "),i("li",[i("p",[t._v("锚框的生成依赖于scale与ratio这两个超参数")])])]),t._v(" "),i("h2",{attrs:{id:"r-cnn系列"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#r-cnn系列"}},[t._v("#")]),t._v(" R-CNN系列")]),t._v(" "),i("p",[t._v("下面简要概括d2l中对R-CNN的描述。")]),t._v(" "),i("h3",{attrs:{id:"r-cnn"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#r-cnn"}},[t._v("#")]),t._v(" R-CNN")]),t._v(" "),i("p",[t._v("R-CNN主要由以下4步构成：")]),t._v(" "),i("p",[i("img",{attrs:{src:a(471),alt:"R-CNN模型"}})]),t._v(" "),i("ol",[i("li",[i("p",[t._v("对输入图像使用选择性搜索（selective search）来选取多个（2k个）高质量的具有不同的形状和大小提议区域（Region Proposal），并进行标注。")])]),t._v(" "),i("li",[i("p",[t._v("选取一个预训练的卷积神经网络，并通过前向计算输出抽取的提议区域特征。")])]),t._v(" "),i("li",[i("p",[t._v("将每个提议区域的特征连同其标注的类别作为一个样本，训练多个支持向量机对目标分类。其中每个支持向量机用来判断样本是否属于某一个类别。")])]),t._v(" "),i("li",[i("p",[t._v("将每个提议区域的特征连同其标注的边界框作为一个样本，训练线性回归模型来预测真实边界框。")]),t._v(" "),i("p",[t._v("R-CNN虽然通过预训练的卷积神经网络有效抽取了图像特征，但它的主要缺点是速度慢，因为每个提议区域都必须经过CNN提取特征。")])])]),t._v(" "),i("h3",{attrs:{id:"fast-r-cnn"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#fast-r-cnn"}},[t._v("#")]),t._v(" Fast R-CNN")]),t._v(" "),i("p",[t._v("Fast R-CNN对R-CNN的一个主要改进在于只对整个图像做卷积神经网络的前向计算。")]),t._v(" "),i("p",[i("img",{attrs:{src:a(472),alt:"Fast R-CNN模型"}})]),t._v(" "),i("p",[t._v("其中池化层（region of interest pooling）的输出大小是可以指定的，这样可以将不同形状的Region Proposal转化为统一大小，以便于后续的预测。")]),t._v(" "),i("h3",{attrs:{id:"faster-r-cnn"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#faster-r-cnn"}},[t._v("#")]),t._v(" Faster R-CNN")]),t._v(" "),i("p",[i("img",{attrs:{src:a(473),alt:"Faster R-CNN模型"}})]),t._v(" "),i("p",[t._v("Fast R-CNN通常需要在选择性搜索中生成较多的提议区域，以获得较精确的目标检测结果。Faster R-CNN提出将选择性搜索替换成区域提议网络（region proposal network），从而减少提议区域的生成数量，并保证目标检测的精度。")]),t._v(" "),i("h2",{attrs:{id:"yolo系列"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#yolo系列"}},[t._v("#")]),t._v(" YOLO系列")]),t._v(" "),i("p",[t._v("YOLO(You Only Look Once)系列与SSD一样采用一步到位的策略（one-stage），没有先产生region proposal再去分类。YOLO系列v1至v3由Joseph Redmon等人提出，后续作者不再更新网络，由Alexey Bochkovskiy提出了v4，另外v5版本存在一定争议，作者没有发表论文，只提供了代码。由于YOLO版本较多，自己了解不深，这里主要收集展示一些自己认为写得比较好的博客。")]),t._v(" "),i("p",[t._v("v1（划分网格，预测坐标类别等）：https://blog.csdn.net/lipengfei0427/article/details/103589165")]),t._v(" "),i("p",[t._v("v2（引入anchor box，将最后的全连接层改为全卷积层）、v3（加深网络、多尺度预测、更换logistics loss）：https://blog.csdn.net/lipengfei0427/article/details/103726333")]),t._v(" "),i("p",[t._v("v3、v4（总结并提出大量技巧进行实验得出最佳组合）：https://blog.csdn.net/nan355655600/article/details/106246625")]),t._v(" "),i("p",[t._v("v5：https://blog.csdn.net/nan355655600/article/details/107852353")]),t._v(" "),i("p",[t._v("v1-v4的发展史：https://zhuanlan.zhihu.com/p/139128562")]),t._v(" "),i("p",[t._v("v3的pytorch实现：https://zhuanlan.zhihu.com/p/137797393")]),t._v(" "),i("p",[t._v("同时附上Redmon论文中V1的网络结构：")]),t._v(" "),i("img",{staticStyle:{zoom:"50%"},attrs:{src:a(474)}}),t._v(" "),i("h2",{attrs:{id:"参考资料"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),i("ul",[i("li",[i("a",{attrs:{href:"https://zh.d2l.ai/chapter_computer-vision/ssd.html#%E5%8D%95%E5%8F%91%E5%A4%9A%E6%A1%86%E6%A3%80%E6%B5%8B%EF%BC%88SSD%EF%BC%89",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://zh.d2l.ai/chapter_computer-vision/ssd.html#单发多框检测（SSD）"),i("OutboundLink")],1)]),t._v(" "),i("li",[i("a",{attrs:{href:"https://d2l.ai/chapter_computer-vision/ssd.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://d2l.ai/chapter_computer-vision/ssd.html"),i("OutboundLink")],1)]),t._v(" "),i("li",[i("a",{attrs:{href:"https://d2l.ai/chapter_computer-vision/rcnn.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://d2l.ai/chapter_computer-vision/rcnn.html"),i("OutboundLink")],1)]),t._v(" "),i("li",[i("a",{attrs:{href:"https://arxiv.org/pdf/1512.02325.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://arxiv.org/pdf/1512.02325.pdf"),i("OutboundLink")],1),t._v("  （SSD）")]),t._v(" "),i("li",[i("a",{attrs:{href:"https://www.zhihu.com/question/46292829/answer/284236956",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.zhihu.com/question/46292829/answer/284236956"),i("OutboundLink")],1)]),t._v(" "),i("li",[i("a",{attrs:{href:"https://blog.csdn.net/weixin_42273095/article/details/81699352",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://blog.csdn.net/weixin_42273095/article/details/81699352"),i("OutboundLink")],1)]),t._v(" "),i("li",[i("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/31427288",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://zhuanlan.zhihu.com/p/31427288"),i("OutboundLink")],1)]),t._v(" "),i("li",[i("a",{attrs:{href:"https://arxiv.org/pdf/1311.2524.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://arxiv.org/pdf/1311.2524.pdf"),i("OutboundLink")],1),t._v("  （R-CNN）")]),t._v(" "),i("li",[i("a",{attrs:{href:"https://arxiv.org/pdf/1504.08083.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://arxiv.org/pdf/1504.08083.pdf"),i("OutboundLink")],1),t._v("  （Fast R-CNN）")]),t._v(" "),i("li",[i("a",{attrs:{href:"https://arxiv.org/pdf/1506.01497.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://arxiv.org/pdf/1506.01497.pdf"),i("OutboundLink")],1),t._v("  （Faster R-CNN）")]),t._v(" "),i("li",[i("a",{attrs:{href:"https://arxiv.org/pdf/1506.02640.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://arxiv.org/pdf/1506.02640.pdf"),i("OutboundLink")],1),t._v("  （YOLO）")]),t._v(" "),i("li",[i("a",{attrs:{href:"https://arxiv.org/pdf/1612.08242.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://arxiv.org/pdf/1612.08242.pdf"),i("OutboundLink")],1),t._v("  （YOLOv2/9000）")]),t._v(" "),i("li",[i("a",{attrs:{href:"https://arxiv.org/pdf/1804.02767.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://arxiv.org/pdf/1804.02767.pdf"),i("OutboundLink")],1),t._v("  （YOLOv3）")]),t._v(" "),i("li",[i("a",{attrs:{href:"https://arxiv.org/pdf/2004.10934.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://arxiv.org/pdf/2004.10934.pdf"),i("OutboundLink")],1),t._v("  （YOLOv4）")])])])}),[],!1,null,null,null);s.default=n.exports}}]);